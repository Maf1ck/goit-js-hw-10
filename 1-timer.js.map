{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst dateInput = document.getElementById('datetime-picker');\nconst startBtn = document.querySelector('[data-start]');\nconst timeElements = {\n  daysEl: document.querySelector('[data-days]'),\n  hoursEl: document.querySelector('[data-hours]'),\n  minutesEl: document.querySelector('[data-minutes]'),\n  secondsEl: document.querySelector('[data-seconds]'),\n};\n\nlet userDate;\nlet currentInterval;\nstartBtn.disabled = true; \n\nconst flatpickrOptions = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  position: 'below left',\n  positionElement: dateInput,\n  locale: {\n    weekdays: {\n      shorthand: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],\n      longhand: [\n        'Sunday',\n        'Monday',\n        'Tuesday',\n        'Wednesday',\n        'Thursday',\n        'Friday',\n        'Saturday',\n      ],\n    },\n  },\n  onClose(selectedDates) {\n    userDate = selectedDates[0];\n    checkDate(userDate);\n  },\n};\n\nconst timeUnits = {\n  days: 1000 * 60 * 60 * 24,\n  hours: 1000 * 60 * 60,\n  minutes: 1000 * 60,\n  seconds: 1000,\n};\n\nstartBtn.addEventListener('click', startTimer);\n\nflatpickr(dateInput, flatpickrOptions);\n\nfunction showMessage() {\n  iziToast.error({\n    position: 'topRight',\n    title: 'Error',\n    message: 'Please choose a date in the future',\n    backgroundColor: '#EF4040',\n  });\n}\n\nfunction checkDate(date) {\n  if (date > new Date()) {\n    startBtn.disabled = false;\n    return true;\n  } else {\n    showMessage();\n    startBtn.disabled = true;\n    return false;\n  }\n}\n\nfunction startTimer() {\n  if (!checkDate(userDate)) return;\n\n  clearInterval(currentInterval);\n\n  currentInterval = setInterval(() => checkTimer(), 1000);\n  dateInput.disabled = true;\n  startBtn.disabled = true;\n}\n\nfunction checkTimer() {\n  let totalLeft = userDate - new Date();\n\n  if (totalLeft <= 0) return stopTimer();\n\n  const getLeft = unit =>\n    Math.floor(totalLeft / timeUnits[unit])\n      .toString()\n      .padStart(2, '0');\n\n  for (let key in timeUnits) {\n    timeElements[key + 'El'].textContent = getLeft(key);\n    totalLeft %= timeUnits[key];\n  }\n}\n\nfunction stopTimer() {\n  clearInterval(currentInterval);\n  dateInput.disabled = false;\n  startBtn.disabled = true; \n}\n"],"names":["dateInput","startBtn","timeElements","userDate","currentInterval","flatpickrOptions","selectedDates","checkDate","timeUnits","startTimer","flatpickr","showMessage","iziToast","date","checkTimer","totalLeft","stopTimer","getLeft","unit","key"],"mappings":"2GAKA,MAAMA,EAAY,SAAS,eAAe,iBAAiB,EACrDC,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAe,CACnB,OAAQ,SAAS,cAAc,aAAa,EAC5C,QAAS,SAAS,cAAc,cAAc,EAC9C,UAAW,SAAS,cAAc,gBAAgB,EAClD,UAAW,SAAS,cAAc,gBAAgB,CACpD,EAEA,IAAIC,EACAC,EACJH,EAAS,SAAW,GAEpB,MAAMI,EAAmB,CACvB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,SAAU,aACV,gBAAiBL,EACjB,OAAQ,CACN,SAAU,CACR,UAAW,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,IAAI,EACpD,SAAU,CACR,SACA,SACA,UACA,YACA,WACA,SACA,UACD,CACF,CACF,EACD,QAAQM,EAAe,CACrBH,EAAWG,EAAc,CAAC,EAC1BC,EAAUJ,CAAQ,CACnB,CACH,EAEMK,EAAY,CAChB,KAAM,IAAO,GAAK,GAAK,GACvB,MAAO,IAAO,GAAK,GACnB,QAAS,IAAO,GAChB,QAAS,GACX,EAEAP,EAAS,iBAAiB,QAASQ,CAAU,EAE7CC,EAAUV,EAAWK,CAAgB,EAErC,SAASM,GAAc,CACrBC,EAAS,MAAM,CACb,SAAU,WACV,MAAO,QACP,QAAS,qCACT,gBAAiB,SACrB,CAAG,CACH,CAEA,SAASL,EAAUM,EAAM,CACvB,OAAIA,EAAO,IAAI,MACbZ,EAAS,SAAW,GACb,KAEPU,IACAV,EAAS,SAAW,GACb,GAEX,CAEA,SAASQ,GAAa,CACfF,EAAUJ,CAAQ,IAEvB,cAAcC,CAAe,EAE7BA,EAAkB,YAAY,IAAMU,EAAY,EAAE,GAAI,EACtDd,EAAU,SAAW,GACrBC,EAAS,SAAW,GACtB,CAEA,SAASa,GAAa,CACpB,IAAIC,EAAYZ,EAAW,IAAI,KAE/B,GAAIY,GAAa,EAAG,OAAOC,IAE3B,MAAMC,EAAUC,GACd,KAAK,MAAMH,EAAYP,EAAUU,CAAI,CAAC,EACnC,SAAU,EACV,SAAS,EAAG,GAAG,EAEpB,QAASC,KAAOX,EACdN,EAAaiB,EAAM,IAAI,EAAE,YAAcF,EAAQE,CAAG,EAClDJ,GAAaP,EAAUW,CAAG,CAE9B,CAEA,SAASH,GAAY,CACnB,cAAcZ,CAAe,EAC7BJ,EAAU,SAAW,GACrBC,EAAS,SAAW,EACtB"}